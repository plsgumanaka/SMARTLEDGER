<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget Planner</title>
    <!-- Added Flaticon CDN -->
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.1.0/uicons-regular-rounded/css/uicons-regular-rounded.css'>
    <link rel="stylesheet" href="../css/budget.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <h1>Budget Overview</h1>
                <p>Manage your spending limits and track progress</p>
            </div>
            <button class="button-primary" onclick="openAddBudgetModal()">+ Create Budget</button>
        </div>

        <!-- Summary Cards -->
        <div class="summary-grid">
            <div class="summary-card">
                <div class="summary-label">Total Budgeted</div>
                <div class="summary-value" id="totalBudgeted">₱0.00</div>
                <div class="summary-subtext">Across all budgets</div>
            </div>
            <div class="summary-card">
                <div class="summary-label">Total Spent</div>
                <div class="summary-value red" id="totalSpent">₱0.00</div>
                <div class="summary-subtext" id="spentPercentage">0.0% of budget</div>
            </div>
            <div class="summary-card">
                <div class="summary-label">Remaining</div>
                <div class="summary-value green" id="totalRemaining">₱0.00</div>
                <div class="summary-subtext" id="statusText">Under budget</div>
            </div>
        </div>

        <!-- Budgets List -->
        <div class="budgets-section">
            <h2>Your Budgets</h2>
            <div id="budgetsList">
                <div class="empty-state">
                    <!-- Replaced emoji with Flaticon -->
                    <div class="empty-state-icon"><i class="fi fi-rr-money-bill-wave"></i></div>
                    <p>No budgets created yet</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Budget Modal -->
    <div id="budgetModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Add Budget</h3>
                <button class="close-btn" onclick="closeBudgetModal()">✕</button>
            </div>
            <div class="modal-body">
                <form id="budgetForm" onsubmit="saveBudget(event)">
                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <div class="custom-dropdown">
                            <div class="custom-dropdown-trigger" id="categoryTrigger" onclick="toggleCategoryDropdown()">
                                <span id="categoryDisplay">Select a category</span>
                                <span class="dropdown-arrow">▼</span>
                            </div>
                            <div class="custom-dropdown-menu" id="categoryMenu">
                                <div class="dropdown-option" onclick="selectCategory('Groceries')"><span>Groceries</span><i class="fi fi-rr-check dropdown-check"></i></div>
                                <div class="dropdown-option" onclick="selectCategory('Dining')"><span>Dining</span><i class="fi fi-rr-check dropdown-check"></i></div>
                                <div class="dropdown-option" onclick="selectCategory('Transport')"><span>Transport</span><i class="fi fi-rr-check dropdown-check"></i></div>
                                <div class="dropdown-option" onclick="selectCategory('Entertainment')"><span>Entertainment</span><i class="fi fi-rr-check dropdown-check"></i></div>
                                <div class="dropdown-option" onclick="selectCategory('Shopping')"><span>Shopping</span><i class="fi fi-rr-check dropdown-check"></i></div>
                                <div class="dropdown-option" onclick="selectCategory('Utilities')"><span>Utilities</span><i class="fi fi-rr-check dropdown-check"></i></div>
                                <div class="dropdown-option" onclick="selectCategory('Healthcare')"><span>Healthcare</span><i class="fi fi-rr-check dropdown-check"></i></div>
                                <div class="dropdown-option" onclick="selectCategory('Other')"><span>Other</span><i class="fi fi-rr-check dropdown-check"></i></div>
                            </div>
                        </div>
                        <input type="hidden" id="categorySelect">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Budget Amount</label>
                        <div class="amount-input-wrapper">
                            <span class="amount-currency">₱</span>
                            <input type="number" id="budgetAmount" placeholder="0.00" step="0.01" min="0" required>
                            <div class="amount-spinners">
                                <button type="button" class="spinner-btn" onclick="incrementBudgetAmount()">▲</button>
                                <button type="button" class="spinner-btn" onclick="decrementBudgetAmount()">▼</button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Time Period</label>
                        <div class="custom-dropdown">
                            <div class="custom-dropdown-trigger" id="periodTrigger" onclick="togglePeriodDropdown()">
                                <span id="periodDisplay">Monthly</span>
                                <span class="dropdown-arrow">▼</span>
                            </div>
                            <div class="custom-dropdown-menu" id="periodMenu">
                                <div class="dropdown-option" onclick="selectPeriod('Weekly')"><span>Weekly</span><i class="fi fi-rr-check dropdown-check"></i></div>
                                <div class="dropdown-option selected" onclick="selectPeriod('Monthly')"><span>Monthly</span><i class="fi fi-rr-check dropdown-check"></i></div>
                                <div class="dropdown-option" onclick="selectPeriod('Quarterly')"><span>Quarterly</span><i class="fi fi-rr-check dropdown-check"></i></div>
                                <div class="dropdown-option" onclick="selectPeriod('Yearly')"><span>Yearly</span><i class="fi fi-rr-check dropdown-check"></i></div>
                            </div>
                        </div>
                        <input type="hidden" id="timePeriod" value="Monthly">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="modal-btn modal-btn-primary" onclick="document.getElementById('budgetForm').dispatchEvent(new Event('submit'))">Save Budget</button>
                <button type="button" class="modal-btn modal-btn-secondary" onclick="closeBudgetModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="confirmModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h3 class="modal-title">Delete Budget</h3>
                <button class="close-btn" onclick="closeConfirmModal()">✕</button>
            </div>
            <div class="modal-body">
                <p style="color: #9ca3af; margin: 0; font-size: 14px; line-height: 1.5;">Are you sure you want to delete this budget? This action cannot be undone.</p>
            </div>
            <div class="modal-footer">
                <button class="modal-btn modal-btn-secondary" onclick="closeConfirmModal()">Cancel</button>
                <button class="modal-btn modal-btn-danger" onclick="confirmDelete()">Delete</button>
            </div>
        </div>
    </div>

    <script src="../js/budget.js"></script>
</body>
</html>
